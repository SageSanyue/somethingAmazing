<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        #traffic-light {
            width: 100px;
            height: 100px;
            border: 1px solid black;
            border-radius: 50%;
        }
        /* .green {
            background-color: green;
        }
        .yellow {
            background-color: yellow;
        }
        .red {
            background-color: red;
        } */
    </style>
</head>
<body>
    <div id="traffic-light">
    </div>
    <script>
        var ele = document.getElementById('traffic-light')
        function trafficChangeColor(color, duration) {
            return new Promise(function(resolve, reject){
                ele.style.backgroundColor = color
                setTimeout(resolve, duration)
            })
        }
        async function trafficScheduler () {
            await trafficChangeColor('green', 5000)
            await trafficChangeColor('yellow', 1000)
            await trafficChangeColor('red', 3000)
            trafficScheduler()
        }
        trafficScheduler()
        // var traffic = document.getElementById('traffic')
        // traffic.className = 'green'
        // var yellow = new Promise(function(resolve, reject) {
        //     setTimeout(function() {
        //         resolve()
        //     }, 3000)
        // })
        // yellow.then(function() {
        //     traffic.className = 'yellow'
        // }).then(
        //     setTimeout(() => {
        //         traffic.className = 'red'
        //     }, 1000)
        // )
        // async function yellow () {
        //     setTimeout(() => {
        //         traffic.className = 'yellow'
        //     }, 1000)
        // }
        // async function red () {
        //     setTimeout(() => {
        //         traffic.className = 'red'
        //     }, 1000)
        // }
        // async function color () {
        //     traffic.className = 'green'
        //     await yellow()
        //     await red()
        //     color()
        // }
        // function sleep(duration){
        //     return new Promise(function(resolve){
        //         setTimeout(resolve, duration);
        //     })
        // }
        // async function changeColor(duration, color){
        //     document.getElementById("traffic-light").style.background = color;
        //     await sleep(duration);

        // }
        // async function main(){
        //     while(true){
        //         await changeColor(8000,"green");
        //         await changeColor(1000, "yellow");
        //         await changeColor(3000, "red");
        //     }
        // }
        // main()

        // const lightEle = document.getElementById('traffic-light');
        // function changeTrafficLight(color, duration) {
        //   return new Promise(function(resolve, reject) {
        //     lightEle.style.background = color;
        //     setTimeout(resolve, duration);
        //   })
        // }

        // async function trafficScheduler() {
        //   await changeTrafficLight('green', 3000);
        //   await changeTrafficLight('yellow', 1000);
        //   await changeTrafficLight('red', 2000);
        //   trafficScheduler();
        // }

        // trafficScheduler();
        // 比较原始的写法
        function color () { 
          console.log('green');

          setTimeout(() => {
            console.log('yellow');

            setTimeout(() => {
              console.log('red');

              setTimeout(color, 2000);
            }, 1000)
          }, 3000);
        }
        color();
    </script>
</body>
</html>